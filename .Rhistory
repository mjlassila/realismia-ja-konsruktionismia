install.packages("tidytext")
devtools::install_github("mikaelpoul/tidystm", dependencies = TRUE)
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(tidytext)
library(here)
library(dtplyr)
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(tidytext)
library(here)
library(stringr)
library(stm)
project_dir <- here::here()
stopwords <- base::readLines(paste0(project_dir,'/data/stopwords.txt'))
constructivist_dataset <- readr::read_csv(paste0(project_dir,'/data/constructivist/constuctivist-dataset.csv'))
project_dir <- here::here()
stopwords <- base::readLines(paste0(project_dir,'/data/stopwords.txt'))
constructivist_dataset <- readr::read_csv(paste0(project_dir,'/data/constructivist/constructivist-dataset.csv'))
constructivist_dataset <- readr::read_csv(paste0(project_dir,'/data/critical-realist/critical-realist-dataset.csv'))
project_dir <- here::here()
stopwords <- base::readLines(paste0(project_dir,'/data/stopwords.txt'))
constructivist_dataset <- readr::read_csv(paste0(project_dir,'/data/constructivist/constructivist-dataset.csv'))
realist_dataset <- readr::read_csv(paste0(project_dir,'/data/critical-realist/critical-realist-dataset.csv'))
?readr
project_dir <- here::here()
stopwords <- base::readLines(paste0(project_dir,'/data/stopwords.txt'))
constructivist_dataset <- readr::read_csv2(paste0(project_dir,'/data/constructivist/constructivist-dataset.csv'),)
realist_dataset <- readr::read_csv2(paste0(project_dir,'/data/critical-realist/critical-realist-dataset.csv'))
View(constructivist_dataset)
View(realist_dataset)
constructivist_dataset[2,]
constructivist_dataset[1,]
constructivist_dataset[2,]
constructivist_dataset[3,]
realist_dataset[3,]
?merge
?rbind
combined_data <- base::rbind(constructivist_dataset, realist_dataset)
View(combined_data)
project_dir <- here::here()
stopwords <- base::readLines(paste0(project_dir,'/data/stopwords.txt'))
constructivist_dataset <- readr::read_csv2(paste0(project_dir,'/data/constructivist/constructivist-dataset.csv'))
realist_dataset <- readr::read_csv2(paste0(project_dir,'/data/critical-realist/critical-realist-dataset.csv'))
combined_data <- base::rbind(constructivist_dataset, realist_dataset)
processed <- textProcessor(combined_data$document, metadata = combined_data)
str(processed)
plotRemoved(processed$documents, lower.thresh = seq(1, 200, by = 100))
out <- prepDocuments(processed$documents, processed$vocab, processed$meta, lower.thresh = 5)
out <- prepDocuments(processed$documents, processed$vocab, processed$meta, lower.thresh = 15)
out <- prepDocuments(processed$documents, processed$vocab, processed$meta, lower.thresh = 5)
?s
model_fit <- stm(
documents = out$documents,
vocab = out$vocab,
K = 0,
prevalence =~ epistemology,
max.em.its = 75,
data = out$meta,
init.type = "Spectral")
stopwords
processed <- textProcessor(
combined_data$document,
metadata = combined_data,
stem = FALSE,
customstopwords = stopwords)
out <- prepDocuments(
processed$documents,
processed$vocab,
processed$meta,
lower.thresh = 5)
model_fit <- stm(
documents = out$documents,
vocab = out$vocab,
K = 0,
prevalence =~ epistemology,
max.em.its = 75,
data = out$meta,
init.type = "Spectral")
storage <- searchK(
out$documents,
out$vocab,
K = c(7, 10),
prevalence =~ epistemology,
data = out$meta)
models_to_select <- stm::selectModel(
out$documents,
out$vocab,
K = 20,
prevalence =~ epistemology,
max.em.its = 75,
data = out$meta,
runs = 100,
seed = 8458159)
plotModels(models_to_select, pch=c(1,2,3,4), legend.position="bottomright")
topicQuality(models_to_select$runout[[1]])
topicQuality(model = models_to_select$runout[[1]],documents = out$documents)
topicQuality(model = models_to_select$runout[[2]],documents = out$documents)
topicQuality(model = models_to_select$runout[[3]],documents = out$documents)
topicQuality(model = models_to_select$runout[[4]],documents = out$documents)
topicQuality(model = models_to_select$runout[[5]],documents = out$documents)
topicQuality(model = models_to_select$runout[[6]],documents = out$documents)
topicQuality(model = models_to_select$runout[[7]],documents = out$documents)
topicQuality(model = models_to_select$runout[[8]],documents = out$documents)
topicQuality(model = models_to_select$runout[[9]],documents = out$documents)
topicQuality(model = models_to_select$runout[[10]],documents = out$documents)
topicQuality(model = models_to_select$runout[[1]],documents = out$documents)
topicQuality(model = models_to_select$runout[[10]],documents = out$documents)
topicQuality(model = models_to_select$runout[[1]],documents = out$documents)
selected_model <- models_to_select$runout[[1]]
labelTopics(poliblogPrevFit, selected_model)
labelTopics(selected_model, selected_model)
str(selected_model)
str(storage)
View(storage)
View(storage$results)
plotModels(models_to_select, pch=c(1,2,3,4), legend.position="bottomright")
final_model_fit <- stm::stm(
documents = out$documents,
vocab = out$vocab,
K = 7,
prevalence =~ epistemology,
max.em.its = 75,
data = out$meta,
init.type = "Spectral")
final_model_fit <- stm::stm(
documents = out$documents,
vocab = out$vocab,
K = 10,
prevalence =~ epistemology,
max.em.its = 75,
data = out$meta,
init.type = "Spectral")
labelTopics(final_model_fit)
?estimateEffect
prep <- stm::estimateEffect(
1:20 ~ epistemology, final_model_fit, meta = out$meta, uncertainty = "Global")
prep <- stm::estimateEffect(
1:10 ~ epistemology, final_model_fit, meta = out$meta, uncertainty = "Global")
summary(prep)
View(model_fit)
1:20 ~ epistemology, model_fit, meta = out$meta, uncertainty = "Global")
prep <- stm::estimateEffect(
1:20 ~ epistemology, model_fit, meta = out$meta, uncertainty = "Global")
summary(prep)
1:30 ~ epistemology, model_fit, meta = out$meta, uncertainty = "Global")
prep <- stm::estimateEffect(
1:30 ~ epistemology, model_fit, meta = out$meta, uncertainty = "Global")
summary(prep)
plot(final_model_fit, type = "summary", xlim = c(0, .3))
plot(prep, covariate = "epistemology", topics = c(3, 7, 20),
)
plot(prep, covariate = "epistemology", topics = c(1:20))
plot(prep, covariate = "epistemology", topics = c(1,2,3,4,5))
prep <- stm::estimateEffect(
1:10 ~ epistemology, final_model_fit, meta = out$meta, uncertainty = "Global")
plot(final_model_fit, covariate = "epistemology", topics = c(1:10))
plot(prep, covariate = "epistemology", topics = c(1:20))
plot(prep, covariate = "epistemology", topics = c(1:5))
plot(prep, covariate = "epistemology", topics = c(1:10z))
plot(prep, covariate = "epistemology", topics = c(1:10))
summary(prep)
plot(prep, covariate = "rating", topics = c(1:10),model = final_model_fit, method = "difference")
View(combined_data)
plot(prep, covariate = "rating", topics = c(1:10),model = final_model_fit, method = "difference", cov.value1 = "critical-realism",cov.value2 = "constructivist")
plot(prep, covariate = "epistemology", topics = c(1:10),model = final_model_fit, method = "difference", cov.value1 = "critical-realism",cov.value2 = "constructivist")
project_dir <- here::here()
stopwords <- base::readLines(paste0(project_dir,'/data/stopwords.txt'))
constructivist_dataset <- readr::read_csv2(paste0(project_dir,'/data/constructivist/constructivist-dataset.csv'))
realist_dataset <- readr::read_csv2(paste0(project_dir,'/data/critical-realist/critical-realist-dataset.csv'))
combined_data <- base::rbind(constructivist_dataset, realist_dataset)
processed <- stm::textProcessor(
combined_data$document,
metadata = combined_data,
stem = FALSE,
customstopwords = stopwords)
out <- stm::prepDocuments(
processed$documents,
processed$vocab,
processed$meta,
lower.thresh = 3)
final_model_fit <- stm::stm(
documents = out$documents,
vocab = out$vocab,
K = 6,
prevalence =~ epistemology,
max.em.its = 75,
data = out$meta,
init.type = "Spectral")
prep <- stm::estimateEffect(
1:5 ~ epistemology, final_model_fit, meta = out$meta, uncertainty = "Global")
summary(prep)
plot(prep, covariate = "epistemology", topics = c(1:5),model = final_model_fit, method = "difference", cov.value1 = "critical-realism",cov.value2 = "constructivist")
?plot
graphics::plot(prep, covariate = "epistemology", topics = c(1:7),model = final_model_fit, method = "difference", cov.value1 = "critical-realism",cov.value2 = "constructivist")
content_final_model_fit <- stm::stm(
documents = out$documents,
vocab = out$vocab,
K = 7,
prevalence =~ epistemology,
max.em.its = 100,
data = out$meta,
content =~ epistemology,
init.type = "Spectral")
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(tidytext)
library(here)
library(stringr)
library(stm)
project_dir <- here::here()
stopwords <- base::readLines(paste0(project_dir,'/data/stopwords.txt'))
constructivist_dataset <- readr::read_csv2(paste0(project_dir,'/data/constructivist/constructivist-dataset.csv'))
realist_dataset <- readr::read_csv2(paste0(project_dir,'/data/critical-realist/critical-realist-dataset.csv'))
combined_data <- base::rbind(constructivist_dataset, realist_dataset)
processed <- stm::textProcessor(
combined_data$document,
metadata = combined_data,
stem = FALSE,
customstopwords = stopwords)
out <- stm::prepDocuments(
processed$documents,
processed$vocab,
processed$meta,
lower.thresh = 3)
content_final_model_fit <- stm::stm(
documents = out$documents,
vocab = out$vocab,
K = 7,
prevalence =~ epistemology,
max.em.its = 100,
data = out$meta,
content =~ epistemology,
init.type = "Spectral")
prep <- stm::estimateEffect(
1:7 ~ epistemology, content_final_model_fit, meta = out$meta, uncertainty = "Global")
graphics::plot(content_final_model_fit, type = "summary", xlim = c(0, .3))
plot(content_final_model_fit, type = "perspectives", topics = 11)
plot(content_final_model_fit, type = "perspectives", topics = 7)
plot(content_final_model_fit, type = "perspectives", topics = 4)
plot(content_final_model_fit, type = "perspectives", topics = 6)
